%!TEX root = paper.tex
%
% VisClaw
%
% Lead currently:  None
%

\newcommand{\cpack}{{\sc ClawPack}\xspace}

\newcommand{\vclaw}{{\sc VisClaw}\xspace}
\newcommand{\aclaw}{{\sc AMRClaw\xspace}\xspace}
\newcommand{\gclaw}{{\sc GeoClaw\xspace}\xspace}
\newcommand{\cclaw}{{\sc Classic Claw}\xspace}
\newcommand{\pclaw}{{\sc PyClaw}\xspace}
\newcommand{\agis}{{\sc ArcGIS}\xspace}
\newcommand{\qgis}{{\sc QGIS}\xspace}

\newcommand{\mlab}{{\sc Matlab}\xspace}
\newcommand{\mplotlib}{{\sc MatPlotLib}\xspace}
\newcommand{\visit}{{\sc VisIt}\xspace}
% \newcommand{\comment}[1]{\red{#1}}

\subsection{VisClaw : Graphics for visualizing \cpack output}
Essential to any software package whose primarly focus is on solving
PDEs is a practical way to visualize the results of the simulations.
This is particularly true for simulations making use of adaptive mesh
refinement methods, since most available visualization packages do not
have tools that conveniently visualize hierarchical AMR data.

From its very first release in 1996 (\cpack 1.0) \alert{dates?},
\cpack has included tools for visualizing the output of \cpack and
\aclaw runs.  Up until the release of version \cpack 4.x, these
visualization tools consisted primarily of a suite of \mlab routines
for creating custom one, two and three dimensional plots including
pseudo-color plots, Schlieren plots, contour plots and scatter plots
of radially or spherically symmetric data. All of the routines were
specially designed to handle the particular file formats produced by
\cpack and to visualize AMR data.  Built in tools were also available
for handling one, two and three-dimensional mapped grids.
Starting with version 4.x, however, it was recognized that a reliance
on proprietary software for visualization prevented a sizable
potential user base from making use of the \cpack software.  As a
result, it was decided to convert the one and two dimensional plotting
routines from \mlab to routines written for the \mplotlib, a popular open source
Python package for producing publication quality graphics
for one and two dimensional data \cite{Hunter:2007}.

With the development of \cpack Version 5.x, Python graphics tools
became what is now called \vclaw, available as a submodule in the
\cpack GitHub organization.  The \vclaw suite of tools extends the
functionality of the existing 4.x Python routines for creating one and
two dimensional plots, and adds several new capabilities.  Chief among
these new capabilities are the ability to generate output to webpages,
where a series of plots can be viewed individually or as an animated
time sequence using the Javascript package {\sc JSAnimation}
\cite{jsanimation}.  The \vclaw module {\tt iplotclaw} provides
interactive plotting capabilities from the Python or IPython prompt.
Providing much of the same interactive capabilities as the original
\mlab routines, {\tt iplotclaw} allows the user to step,
interactively, through a time sequence of plots, jump from one frame
to another, or interactively explore data from the current time frame.

\vclaw provides support for all of the main \cpack submodules, including
\cclaw, \aclaw, \pclaw and \gclaw.

\comment{{Does PyClaw use VisClaw?  Parallel capabilities?  Other backends?}}

\subsubsection{Tools for visualizing geo-spatial data produced by \gclaw}
The geo-spatial data generated by \gclaw has particular visualization
requirements.  Tsunami or storm surge simulations are most useful when
the plots showing inundation or flooding levels are overlaid onto
background bathymetry or topography.  Supplementary one dimensional
time series data (e.g. gauge data) numerically interpolated from
the simulation at fixed spatial locations are most useful when
compared graphically to observational data.  Finally, to more
thoroughly analyze the computational data, simulation data
should be made available in formats that can be easily exported to GIS tools
such as \agis or the open source alternative \qgis
\cite{arcgis,qgis}.  For communicating results to non-experts, Google
Earth may also be helpful.

The current versions of \vclaw now include many specialized routines
for handling the above issues.  Topography or bathymetry data that was
used in the simulation will be read by the graphing routines, and,
using distinct colormaps, both water and land can be viewed on the
same plot.   Additionally, gauge locations can be added, along with contours
of water and land.  One dimensional gauge plots are also created, according to
user-customizable routines.

In addition to HTML and Latex formats (described above), \vclaw will now also
produce KML and KMZ files suitable for visualizing results in Google Earth.
Using the same \mplotlib graphics routines, \vclaw creates PNG files
that can be used as GroundOverlay features in a KML file.  Other features, such
as gauges, borders on AMR grids, and user specified regions can also be
shown on Google Earth.  All KML and PNG files are compressed into a single
KMZ file  that can be opened directly in Google Earth or made available on-line.
While \vclaw does not have any direct support for \agis or \qgis,
the  KML files created for Google Earth can be easily edited for
export, along with associated PNG files to these other GIS applications.

\subsubsection{Matlab plotting routines}
The \mlab plotting available in early versions of \cpack are now part
of \vclaw.  While most of the one and two dimensional capabilities
available originally in the \mlab suite have now been ported to Python
and \mplotlib, \mlab suite may still have advantages for those users
with access to \mlab.  For example, results on two dimensional
manifolds embedded in three dimensional space can be handled easily
with \vclaw, and three dimensional graphics are currently still
available only in the existing Matlab suite of routines (for smaller
simulations), or using \visit \cite{HPV:VisIt}, but more advanced 3d
plotting capabilities are planned for future releases of \cpack.
